<table class="table">
    <thead>
		<tr style="background-color: #CCFFFF">
			<td>
				<span>MD</span>
			</td>
			<td>
				<span>Incl</span>
			</td>
			<td>
				<span>Az</span>
			</td>
			<td>
				<span>TVD</span>
			</td>
			<td>
				<span>North</span>
			</td>
			<td>
				<span>East</span>
			</td>
			<td>
				<span>SurveyTool</span>
			</td>
		</tr>
		<tr style="background-color: #CCFFFF">
			<td>
				<SpanUnitLabel QuantityName="Depth" />
			</td>
			<td>
				<SpanUnitLabel QuantityName="DrillingPlaneAngle" />
			</td>
			<td>
				<SpanUnitLabel QuantityName="DrillingPlaneAngle" />
			</td>
			<td>
				<SpanUnitLabel QuantityName="Depth" />
			</td>
			<td>
				<SpanUnitLabel QuantityName="Position" />
			</td>
			<td>
				<SpanUnitLabel QuantityName="Position" />
			</td>
			<td>
				
			</td>
		</tr>
    </thead>
	<tbody>
		@*@foreach (SurveyStation station in Trajectory.SurveyList.ListOfSurveys)
		{
			<tr>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Depth" SIValue="@((double)station.MdWGS84)" SIValueChanged="@((value) => @UpdateMD( value, local))"/>
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="DrillingPlaneAngle" SIValue="@((double)station.Incl)" />
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="DrillingPlaneAngle" SIValue="@((double)station.AzWGS84)" />
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Depth" SIValue="@((double)station.TvdWGS84)" />
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Position" SIValue="@((double)station.NorthOfWellHead)" />
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Position" SIValue="@((double)station.EastOfWellHead)" />
				</td>
				<td>
					<select class="form-control selectpicker" @bind="@station.SurveyTool.Name">
						@if (SurveyInstrumentNames != null)
						{
							@foreach (string surveyInstrument in SurveyInstrumentNames)
							{
								<option>@surveyInstrument</option>
							}
						}
					</select>
				</td>
			</tr>
		}*@
		@for (int i =0; i<Trajectory.SurveyList.ListOfSurveys.Count;i++)
		{
			var local = i;
			<tr>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Depth" SIValue="@((double)Trajectory.SurveyList.ListOfSurveys.ElementAt(i).MdWGS84)" SIValueChanged="@((value) => @UpdateMD( value, local))" />
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="DrillingPlaneAngle" SIValue="@((double)Trajectory.SurveyList.ListOfSurveys.ElementAt(i).Incl)" SIValueChanged="@((value) => @UpdateIncl( value, local))"/>
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="DrillingPlaneAngle" SIValue="@((double)Trajectory.SurveyList.ListOfSurveys.ElementAt(i).AzWGS84)" SIValueChanged="@((value) => @UpdateAz( value, local))"/>
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Depth" SIValue="@((double)Trajectory.SurveyList.ListOfSurveys.ElementAt(i).TvdWGS84)" SIValueChanged="@((value) => @UpdateTVD( value, local))"/>
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Position" SIValue="@((double)Trajectory.SurveyList.ListOfSurveys.ElementAt(i).NorthOfWellHead)"SIValueChanged="@((value) => @UpdateNorth( value, local))" />
				</td>
				<td style="text-align: left">
					<InputWithUnit QuantityName="Position" SIValue="@((double)Trajectory.SurveyList.ListOfSurveys.ElementAt(i).EastOfWellHead)" SIValueChanged="@((value) => @UpdateEast( value, local))"/>
				</td>
				<td>
					<select class="form-control selectpicker" @bind="@Trajectory.SurveyList.ListOfSurveys.ElementAt(i).SurveyTool.Name">
						@if (SurveyInstrumentNames != null)
						{
							@foreach (string surveyInstrument in SurveyInstrumentNames)
							{
								<option>@surveyInstrument</option>
							}
						}
					</select>
				</td>
			</tr>
		}
	</tbody>
</table>

@code {
	[Parameter]
	public Trajectory Trajectory { get; set; }
	[Parameter]
	public List<string> SurveyInstrumentNames { get; set; }

	private async Task UpdateMD(double val, int idx)
	{
		Trajectory.SurveyList.ListOfSurveys.ElementAt(idx).MdWGS84 = val;
	}
	private async Task UpdateIncl(double val, int idx)
	{
		Trajectory.SurveyList.ListOfSurveys.ElementAt(idx).Incl= val;
	}
	private async Task UpdateAz(double val, int idx)
	{
		Trajectory.SurveyList.ListOfSurveys.ElementAt(idx).AzWGS84 = val;
	}
	private async Task UpdateTVD(double val, int idx)
	{
		Trajectory.SurveyList.ListOfSurveys.ElementAt(idx).TvdWGS84 = val;
	}
	private async Task UpdateNorth(double val, int idx)
	{
		Trajectory.SurveyList.ListOfSurveys.ElementAt(idx).NorthOfWellHead = val;
	}
	private async Task UpdateEast(double val, int idx)
	{
		Trajectory.SurveyList.ListOfSurveys.ElementAt(idx).EastOfWellHead = val;
	}
}
